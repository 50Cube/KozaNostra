<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
<h:head>
    <link href='https://fonts.googleapis.com/css?family=Open Sans' rel='stylesheet'/>
    <link href='../css/content.css' rel='stylesheet'/>
    <h:outputStylesheet name="/css/content.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <ui:insert name="head">
        <title>Template</title>
    </ui:insert>
</h:head>
<h:body>
    <p:ajaxStatus onstart="PF('loading').show()" onsuccess="PF('loading').hide()" />

    <p:dialog widgetVar="loading" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
        <p:graphicImage library="library" name="loading.gif" style="max-height: 50px; max-width: 50px" />
    </p:dialog>

    <div class = "wrapper">		
        <div class = "header" style="background: #{roleController.headerColorForRole}">
            <p:sidebar  widgetVar="sb" baseZIndex="100000">
                <ui:fragment id="admin-sidebar" rendered="#{roleController.isSelectedRole(roleController.getRoleAdmin())}">
                    <h1 style="font-weight:normal">#{msg['page.template.admin.console']}</h1>
                    <div>
                        <p:button id="listAccountsButton" value="#{msg['page.template.admin.listAccounts']}" outcome="/admin/listAccounts.xhtml"/>
                    </div>
                    <div style="padding-top: 5px; padding-bottom: 5px">
                        <p:button id="addAccountButton" value="#{msg['page.template.admin.addAccount']}" outcome="/admin/addAccount.xhtml"/>
                    </div>
                </ui:fragment>
                <ui:fragment id="manager-sidebar" rendered="#{roleController.isSelectedRole(roleController.getRoleManager())}">
                    <h1 style="font-weight:normal">#{msg['page.template.manager.console']}</h1>
                </ui:fragment>
                <div>
                    <p:commandButton value="#{msg['page.template.hide']}" oncomplete="PF('sb').hide()"/>
                </div>
            </p:sidebar>
             <div class = "header-left">
                 <p:commandLink styleClass="menu-button" id="menu-button" oncomplete="PF('sb').show()" rendered="#{roleController.isSelectedRole(roleController.getRoleAdmin()) or roleController.isSelectedRole(roleController.getRoleManager())}">
                     <i class="pi pi-bars" style="font-size: 3em;color: white" />
                 </p:commandLink>
                 <h:link class="logo" outcome="/index.xhtml">LogoPlaceholder</h:link> 
             </div>
            <div class = "header-right">
                <ui:fragment id="guest-right-links" rendered="#{empty request.remoteUser}">
                    <h:link id="loginButton" class="link" outcome="/login/login.xhtml">#{msg['page.template.login']}</h:link>
                    <h:link id="registerButton" class="link" outcome="/register.xhtml">#{msg['page.template.signup']}</h:link>
                </ui:fragment>
                 <ui:fragment id="user-details" rendered="#{not empty request.remoteUser}">
                     <h:form>
                         <p:commandButton id="dynaButton" value="#{request.remoteUser}" type="button" icon="pi pi-user" />
                         <p:slideMenu overlay="true" trigger="dynaButton" my="left top" at="left bottom" style="width:180px" backLabel="#{msg['page.template.menu.backbutton']}">
                             <p:submenu id="accountDetailsMenu" label="#{msg['page.template.accountdetails']}" icon="pi pi-pencil" >
                                 <p:menuitem id="changePasswordButton" value="${msg['page.template.changepassword']}" outcome="/changePassword.xhtml"/>
                                 <p:menuitem id="accountDetailsButton" value="#{msg['page.template.accountdetails']}" action="#{ownAccountDetailsController.selectOwnAccount()}" />
                             </p:submenu>
                             <c:if test="#{roleController.selectedRole.equalsIgnoreCase(roleController.getRoleClient())}">
                                 <p:menuitem id="isClient" value="#{msg['page.changelevel.client']}" icon="pi pi-id-card" disabled="true"/>
                             </c:if>
                             <c:if test="#{roleController.selectedRole.equalsIgnoreCase(roleController.getRoleManager())}">
                                 <p:menuitem id="isManager" value="#{msg['page.changelevel.manager']}" icon="pi pi-id-card" disabled="true"/>
                             </c:if>
                             <c:if test="#{roleController.selectedRole.equalsIgnoreCase(roleController.getRoleAdmin())}">
                                 <p:menuitem id="isAdmin" value="#{msg['page.changelevel.admin']}" icon="pi pi-id-card" disabled="true"/>
                             </c:if>
                             <p:submenu id="changeRoleButton" label="#{msg['page.template.changerole']}" rendered="#{roleController.allUserRolesLength > 1}" icon="pi pi-user-edit">
                                 <c:if test="#{roleController.isInClientRole()}">
                                     <p:menuitem id="changeClient" value="#{msg['page.changelevel.client']}" action="#{roleController.setCurrentRole(roleController.getRoleClient())}"  ajax="false"/>
                                 </c:if>
                                 <c:if test="#{roleController.isInManagerRole()}">
                                     <p:menuitem id="changeManager" value="#{msg['page.changelevel.manager']}" action="#{roleController.setCurrentRole(roleController.getRoleManager())}" ajax="false"/>
                                 </c:if>
                                 <c:if test="#{roleController.isInAdminRole()}">
                                     <p:menuitem id="changeAdmin" value="#{msg['page.changelevel.admin']}" action="#{roleController.setCurrentRole(roleController.getRoleAdmin())}" ajax="false"/>
                                 </c:if>
                             </p:submenu>
                             <p:menuitem id="logoutButton" value="#{msg['page.template.logout']}" icon="pi pi-sign-out" action="#{logoutController.logout()}"/>
                         </p:slideMenu>
                     </h:form>
                 </ui:fragment>
             </div>
        </div>
        <div class ="breadcrumb">
            <h:form>
                <p:breadCrumb>
                    <p:menuitem value="Home" outcome="/index.xhtml" />
                    <ui:insert name="breadcrumb-menuitems"/>
                </p:breadCrumb>
            </h:form>
        </div>
        <div class = "main">
            <ui:insert name="content" >
            </ui:insert>
        </div>

        <div class = "footer">
            <div class ="footer-text">2020 @SSBD05</div>
        </div>
    </div>
    <h:form>
        <p:growl id="informationBox" showDetail="true" life="3000"/>
    </h:form>
</h:body>
</html>
