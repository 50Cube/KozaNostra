<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
<h:head>
    <link href='https://fonts.googleapis.com/css?family=Open Sans' rel='stylesheet'/>
    <link href='../css/content.css' rel='stylesheet'/>
    <h:outputStylesheet name="/css/content.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <ui:insert name="head">
        <title>Template</title>
    </ui:insert>
</h:head>
<h:body>
    <div class = "wrapper">		
        <div class = "header" style="background: #{roleController.headerColorForRole}">
            <p:sidebar  widgetVar="sb" baseZIndex="100000">
                <ui:fragment id="admin-sidebar" rendered="#{roleController.isSelectedRole('Admin')}">
                    <h1 style="font-weight:normal">#{msg['page.template.admin.console']}</h1>
                    <p:button value="#{msg['page.template.admin.listAccounts']}" outcome="/admin/listAccounts.xhtml"/>
                </ui:fragment>
                <ui:fragment id="manager-sidebar" rendered="#{roleController.isSelectedRole('Manager')}">
                    <h1 style="font-weight:normal">#{msg['page.template.manager.console']}</h1>
                </ui:fragment>
                <p:commandButton value="#{msg['page.template.hide']}" oncomplete="PF('sb').hide()"/>
            </p:sidebar>
             <div class = "header-left">
                 <p:commandLink styleClass="menu-button" id="menu-button" oncomplete="PF('sb').show()" rendered="#{roleController.isSelectedRole('Admin') or roleController.isSelectedRole('Manager')}">
                     <i class="pi pi-bars" style="font-size: 3em;color: white" ></i>
                 </p:commandLink>
                 <h:link class="logo" outcome="/index.xhtml">LogoPlaceholder</h:link> 
             </div>
            <div class = "header-right">
                <ui:fragment id="guest-right-links" rendered="#{empty request.remoteUser}">
                    <h:link class="link" outcome="/login/login.xhtml">#{msg['page.template.login']}</h:link>
                    <h:link class="link" outcome="/register.xhtml">#{msg['page.template.signup']}</h:link>
                </ui:fragment>
                 <ui:fragment id="user-details" rendered="#{not empty request.remoteUser}">
                     <h:form>
                         <p:commandButton id="dynaButton" value="#{request.remoteUser}" type="button" icon="pi pi-user" />
                         <p:slideMenu overlay="true" trigger="dynaButton" my="left top" at="left bottom" style="width:180px" backLabel="#{msg['page.template.menu.backbutton']}">
                             <p:submenu label="#{msg['page.template.accountdetails']}" icon="pi pi-pencil" >
                                 <p:menuitem value="Do uzupelnienia" />
                             </p:submenu>
                             <c:if test="#{roleController.selectedRole.equalsIgnoreCase('CLIENT')}">
                                 <p:menuitem value="#{msg['page.changelevel.client']}" icon="pi pi-id-card" disabled="true"/>
                             </c:if>
                             <c:if test="#{roleController.selectedRole.equalsIgnoreCase('MANAGER')}">
                                 <p:menuitem value="#{msg['page.changelevel.manager']}" icon="pi pi-id-card" disabled="true"/>
                             </c:if>
                             <c:if test="#{roleController.selectedRole.equalsIgnoreCase('ADMIN')}">
                                 <p:menuitem value="#{msg['page.changelevel.admin']}" icon="pi pi-id-card" disabled="true"/>
                             </c:if>
                             <p:submenu label="#{msg['page.template.changerole']}" rendered="#{roleController.allUserRolesLength > 1}" icon="pi pi-user-edit">
                                 <c:if test="#{facesContext.externalContext.isUserInRole('CLIENT')}">
                                     <p:menuitem value="#{msg['page.changelevel.client']}" action="#{roleController.setCurrentRole('Client')}"  ajax="false"/>
                                 </c:if>
                                 <c:if test="#{facesContext.externalContext.isUserInRole('MANAGER')}">
                                     <p:menuitem value="#{msg['page.changelevel.manager']}" action="#{roleController.setCurrentRole('Manager')}" ajax="false"/>
                                 </c:if>
                                 <c:if test="#{facesContext.externalContext.isUserInRole('ADMIN')}">
                                     <p:menuitem value="#{msg['page.changelevel.admin']}" action="#{roleController.setCurrentRole('Admin')}" ajax="false"/>
                                 </c:if>
                             </p:submenu>
                             <p:menuitem value="#{msg['page.template.logout']}" icon="pi pi-sign-out" action="#{logoutController.logout()}"/>
                         </p:slideMenu>
                     </h:form>
                 </ui:fragment>
             </div>
        </div>
        <div class ="breadcrumb">
            <p:breadCrumb>
                <p:menuitem value="Home" outcome="/index.xhtml" />
                <ui:insert name="breadcrumb-menuitems"/>
            </p:breadCrumb>
        </div>
        <div class = "main">
            <ui:insert name="content" >
            </ui:insert>
        </div>

        <div class = "footer">
            <div class ="footer-text">2020 @SSBD05</div>
        </div>
    </div>
    <h:form>
        <p:growl id="informationBox" showDetail="true" life="3000"/>
        <f:event type="preRenderView" listener="#{loginController.informAboutLastAuthentication}" />
    </h:form>
</h:body>
</html>
